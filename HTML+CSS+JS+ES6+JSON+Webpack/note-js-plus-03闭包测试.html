<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<script type="text/javascript">
    /*
    * 执行函数定义就会产生闭包（不用调用内部函数）
    * 外部函数调用几次，闭包就产生几次
    *
    * 外部函数+内部函数引用外部函数变量
    *
    * 闭包（closure）的作用：
    * 1. 使函数内部的变量在函数执行完成后，任然存活在内存中（延长了变量的生命周期）
    * 2. 让函数外部可以操作（读写）内部的数据（变量，数据）
    *
    * 闭包的生命周期：
    * 1.产生:在嵌套内部函数定义执行时就产生了
    * 2.死亡：在嵌套内部函数成为垃圾对象时
    * */
    function f1(){
        var a=1;
        var b=2;
        function f2(){
            console.log(a);
        }
        f2();
    }
    f1();

    console.log("------");

    function fn1(){
        var a=2;
        function fn2(){
            a++;
            console.log(a);
        }
        return fn2;
    }
    var f=fn1();
    f();
    f();
    f=null// 闭包死亡
</script>
</body>
</html>